<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Dynamical System Visualizer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/14.6.0/math.min.js" integrity="sha512-nw07d3E1b2VJ8z/JI92aD68bVsX0K8XSSUB/IDUvAEvOlC75mJe3+IGg+zAnllwGku1hSHUVLqgtb+CUp7NeyQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <!-- <h1>2D Dynamical System Visualizer</h1> -->
            <!-- <p>Visualize flow fields of two-dimensional dynamical systems</p> -->
        </header>

        <div class="main-content">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="section">
                    <h3>System Equations</h3>
                    <div class="equation-group">
                        <label for="dx-dt">dx/dt =</label>
                        <input type="text" id="dx-dt" placeholder="e.g., -y + x*(1 - x^2 - y^2)" value="-y + x*(1 - x^2 - y^2)">
                    </div>
                    <div class="equation-group">
                        <label for="dy-dt">dy/dt =</label>
                        <input type="text" id="dy-dt" placeholder="e.g., x + y*(1 - x^2 - y^2)" value="x + y*(1 - x^2 - y^2)">
                    </div>
                    
                    <div class="equation-group">
                        <label for="parameters">Parameters (JSON):</label>
                        <textarea id="parameters" placeholder='{"mu": 1, "alpha": 0.5}' rows="3">{}</textarea>
                        <small class="help-text">Define custom parameters as JSON object</small>
                    </div>
                    
                    <button id="update-system">Update System</button>
                </div>

                <div class="section">
                    <h3>Visualization Settings</h3>
                    
                    <div class="setting-group">
                        <label for="grid-density">Grid Density:</label>
                        <input type="range" id="grid-density" min="10" max="50" value="20">
                        <span id="grid-density-value">20</span>
                    </div>

                    <div class="setting-group">
                        <label for="arrow-scale">Arrow Scale:</label>
                        <input type="range" id="arrow-scale" min="0.1" max="2" step="0.1" value="0.5">
                        <span id="arrow-scale-value">0.5</span>
                    </div>

                    <div class="setting-group">
                        <label for="arrow-color">Arrow Color:</label>
                        <input type="color" id="arrow-color" value="#3498db">
                    </div>

                    <div class="setting-group">
                        <label for="show-grid">Show Grid:</label>
                        <input type="checkbox" id="show-grid" checked>
                    </div>

                    <div class="setting-group">
                        <label for="show-nullclines">Show Nullclines:</label>
                        <input type="checkbox" id="show-nullclines">
                    </div>
                </div>

                <div class="section">
                    <h3>View Settings</h3>
                    
                    <div class="setting-group">
                        <label for="x-range">X Range:</label>
                        <input type="number" id="x-min" value="-5" step="0.1" style="width: 60px;">
                        to
                        <input type="number" id="x-max" value="5" step="0.1" style="width: 60px;">
                    </div>

                    <div class="setting-group">
                        <label for="y-range">Y Range:</label>
                        <input type="number" id="y-min" value="-5" step="0.1" style="width: 60px;">
                        to
                        <input type="number" id="y-max" value="5" step="0.1" style="width: 60px;">
                    </div>

                    <button id="reset-view">Reset View</button>
                </div>

                <div class="section">
                    <h3>Presets</h3>
                    <select id="preset-select">
                        <option value="">Select a preset...</option>
                        <option value="van-der-pol">Van der Pol Oscillator</option>
                        <option value="pendulum">Damped Pendulum</option>
                        <option value="lotka-volterra">Lotka-Volterra</option>
                        <option value="spiral">Spiral Sink</option>
                        <option value="fitzhugh-nagumo">FitzHughâ€“Nagumo model</option>
                    </select>
                </div>
            </div>

            <!-- Visualization Panel -->
            <div class="visualization-panel">
                <div class="canvas-container">
                    <canvas id="flow-field-canvas" width="800" height="800"></canvas>
                    <div class="particle-controls">
                        <button id="clear-particles" class="control-btn">Clear Particles</button>
                        <button id="clear-trajectories" class="control-btn">Clear Trajectories</button>
                        <button id="reset-all" class="control-btn">Reset All</button>
                        <div class="particle-info">
                            <span id="particle-count">Particles: 0</span>
                        </div>
                    </div>
                </div>
                <div id="equation-display" class="equation-display">
                    <div class="equation-title">System Equations</div>
                    <div id="latex-equations"></div>
                </div>
                <div class="canvas-info">
                    <span id="mouse-coordinates">Move mouse over canvas to see coordinates</span>
                    <div id="current-parameters" style="margin-top: 10px; font-size: 12px; color: #666;"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
