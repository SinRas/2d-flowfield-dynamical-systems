<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Dynamical System Visualizer</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/14.6.0/math.min.js" integrity="sha512-nw07d3E1b2VJ8z/JI92aD68bVsX0K8XSSUB/IDUvAEvOlC75mJe3+IGg+zAnllwGku1hSHUVLqgtb+CUp7NeyQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@6.0.0/dist/echarts.min.js" integrity="sha256-uqjf5+HZM2uY6Jhrp+IOoV582+oe9CpZ1ZR4Yy+kWh0=" crossorigin="anonymous"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <div class="github-link">
                <a href="https://github.com/SinRas/2d-flowfield-dynamical-systems" target="_blank" rel="noopener noreferrer">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle; margin-right: 4px;">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    View on GitHub
                </a>
            </div>
            <!-- <h1>2D Dynamical System Visualizer</h1> -->
            <!-- <p>Visualize flow fields of two-dimensional dynamical systems</p> -->
        </header>

        <div class="main-content">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="section">
                    <h3>System Equations</h3>
                    <!-- Presets -->
                    <select id="preset-select" style="margin-bottom: 10px;">
                        <option value="">Select a preset...</option>
                        <option value="van-der-pol">Van der Pol Oscillator</option>
                        <option value="pendulum">Damped Pendulum</option>
                        <option value="lotka-volterra">Lotka-Volterra</option>
                        <option value="spiral">Spiral Sink</option>
                        <option value="fitzhugh-nagumo">FitzHughâ€“Nagumo model</option>
                    </select>
                    <!-- Equations -->
                    <div class="equation-group">
                        <label for="dx-dt">dx/dt =</label>
                        <input type="text" id="dx-dt" placeholder="e.g., -y + x*(1 - x^2 - y^2)" value="-y + x*(1 - x^2 - y^2)">
                    </div>
                    <div class="equation-group">
                        <label for="dy-dt">dy/dt =</label>
                        <input type="text" id="dy-dt" placeholder="e.g., x + y*(1 - x^2 - y^2)" value="x + y*(1 - x^2 - y^2)">
                    </div>
                    <!-- Parameters -->
                    <div class="equation-group">
                        <label for="parameters">Parameters (JSON):</label>
                        <textarea id="parameters" placeholder='{"mu": 1, "alpha": 0.5}' rows="3">{}</textarea>
                        <small class="help-text">Define custom parameters as JSON object</small>
                    </div>
                    
                    <button id="update-system">Update System</button>
                </div>

                <div class="section">
                    <h3>Visualization Settings</h3>
                    
                    <div class="setting-group">
                        <label for="grid-density">Grid Density:</label>
                        <input type="range" id="grid-density" min="10" max="50" value="20">
                        <span id="grid-density-value">20</span>
                    </div>

                    <div class="setting-group">
                        <label for="arrow-scale">Arrow Scale:</label>
                        <input type="range" id="arrow-scale" min="0.1" max="2" step="0.1" value="0.5">
                        <span id="arrow-scale-value">0.5</span>
                    </div>

                    <div class="setting-group">
                        <label for="arrow-color">Arrow Color:</label>
                        <input type="color" id="arrow-color" value="#3498db">
                    </div>

                    <div class="setting-group">
                        <label for="show-grid">Show Grid:</label>
                        <input type="checkbox" id="show-grid" checked>
                    </div>

                    <div class="setting-group">
                        <label for="show-nullclines">Show Nullclines:</label>
                        <input type="checkbox" id="show-nullclines">
                    </div>
                </div>

                <div class="section">
                    <h3>View Settings</h3>
                    
                    <div class="setting-group">
                        <label for="x-range">X Range:</label>
                        <input type="number" id="x-min" value="-5" step="0.1" style="width: 60px;">
                        to
                        <input type="number" id="x-max" value="5" step="0.1" style="width: 60px;">
                    </div>

                    <div class="setting-group">
                        <label for="y-range">Y Range:</label>
                        <input type="number" id="y-min" value="-5" step="0.1" style="width: 60px;">
                        to
                        <input type="number" id="y-max" value="5" step="0.1" style="width: 60px;">
                    </div>
                    <button id="reset-view">Reset View</button>
                </div>
                <div class="section">
                    <!-- Render the equations -->
                <div id="equation-display" class="equation-display">
                    <div class="equation-title">System Equations</div>
                    <div id="latex-equations"></div>
                </div>
                <!-- Render the mouse coordinates -->
                <div class="canvas-info">
                    <span id="mouse-coordinates">Move mouse over canvas to see coordinates</span>
                    <div id="current-parameters" style="margin-top: 10px; font-size: 12px; color: #666;"></div>
                </div>
                </div>
            </div>

            <!-- Visualization Panel -->
            <div class="visualization-panel">
                <!-- Canvas for flow field visualization -->
                <div class="canvas-container">
                    <canvas id="flow-field-canvas" width="800" height="800"></canvas>
                    <div class="particle-controls">
                        <button id="clear-particles" class="control-btn">Clear Particles</button>
                        <button id="clear-trajectories" class="control-btn">Clear Trajectories</button>
                        <button id="reset-all" class="control-btn">Reset All</button>
                        <div class="particle-info">
                            <span id="particle-count">Particles: 0</span>
                        </div>
                    </div>
                    
                </div>

                <!-- Render the chart -->
                <div id="echarts-container" style="width: 100%; height: 400px;"></div>
                
                
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
